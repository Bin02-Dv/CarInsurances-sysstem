{% extends "base.html" %}
{% load static %}

{% block title %}
    <title>Insurance - Claims</title>
{% endblock %}

{% block Css %}
<link rel="stylesheet" href="{% static 'css/claims.css' %}">
{% endblock %}


{% block content %}

<div class="claims-container">
    <header>
        <h1>Claims Management</h1>
        {% comment %} <input type="text" id="searchBar" placeholder="Search Claims..."> {% endcomment %}
        <a href="/add-claims/"><button class="btn-add">Add New Claim</button></a>
    </header>

    <table>
        <thead>
            <tr>
                <th>Claim ID</th>
                <th>Policy Holder</th>
                <th>Claim Amount</th>
                <th>Incident Date</th>
                <th>Supporting Document</th>
                <th>Status</th>
                {% if current_user.is_superuser %}
                <th>Actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% if claims %}
            {% for claim in claims %}
            <tr>
                <td>CLM-{{claim.id}}</td>
                <td>{{claim.user.first_name}}</td>
                <td>{{claim.claim_amount}}</td>
                <td>{{claim.incident_date}}</td>
                <td><a href="{{claim.supporting_documents.url}}">{{claim.supporting_documents.url}}</a></td>
                <td>{{claim.status}}</td>
                {% if current_user.is_superuser %}
                <td>
                    <a href=""><button class="btn-approve">Approve</button></a>
                    <a href=""><button class="btn-reject">Reject</button></a>
                    <a href=""><button class="btn-delete">Delete</button></a>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td>###</td>
                <td>No data</td>
                <td>No data</td>
                <td>No data</td>
                <td>No data</td>
                <td>No data</td>
                {% if current_user.is_superuser %}
                <td>
                    <button style="opacity: .3;" class="btn-approve" disabled>Approve</button>
                    <button style="opacity: .3;" class="btn-reject" disabled>Reject</button>
                    <button style="opacity: .3;" class="btn-delete">Delete</button>
                </td>
                {% endif %}
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
